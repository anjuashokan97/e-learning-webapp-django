<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <title>{{slug}}</title>
    <style>
    
        #video_list{
            overflow-y: scroll;
        }
        {% comment %} CUSTOM SCROLL BAR {% endcomment %}
        /* width */
        ::-webkit-scrollbar {
        width: 10px;
        }

        /* Track */
        ::-webkit-scrollbar-track {
        background: #f1f1f1; 
        }
        
        /* Handle */
        ::-webkit-scrollbar-thumb {
        background: #888; 
        }

        /* Handle on hover */
        ::-webkit-scrollbar-thumb:hover {
        background: #555; 
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <!--VIDEO UPLOAD-->
        <div class="row">
            <div class="col">
                <div class="mx-auto">
                    <video controls width="100%" id="video_container">
                        <source src="{{videos.0.video.url}}" type="video/mp4" />
                    </video>
                </div>
            </div>
            <!--VIDEO PLAYLIST-->
            <div class="col-12 col-md-3">
                <ul id="video_list" class="list-group">
                    <div class="list-group" >
                        {% for video in videos %}
                            <li class="list-group-item" id="video_list">
                                <a href="#" class="list-group-item list-group-item-action {% if forloop.first %}active{% endif %}" onclick="changeVideo('{{ video.video.url }}', '{{video.serial_number}}', '{{video.heading}}', this)">
                                    {{ video.heading }}
                                </a>
                            </li>
                        {% endfor %}
                    </div>
                  </ul>
            </div>
        </div>

        <!--DESCRIPTION-->
        <div class="mt-3">
            <div>
                {% comment %} <p style="font-family: Tahoma, sans-serif;">Welcome to {{course.cou_name}} Tutorial</p> {% endcomment %}
                {% for video in videos %}
                    {% if forloop.first %}
                       <h4 id="demo" style="font-family: Arial, sans-serif;">{{video.serial_number}}.  {{video}}</h4>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    <script>
        var player;
        var video_list;
        

        document.onreadystatechange = function () {
            if (document.readyState == 'interactive') {
                player = document.getElementById('video_container')
                video_list = document.getElementById('video_list')
                maintainRatio()
            }
        }
        function maintainRatio(){
            var w = player.clientWidth
            var h = (w*9)/16
            console.log({w,h})
            player.height = h
            video_list.style.maxHeight = h + "px"
        }
        window.onresize = maintainRatio


        function changeVideo(videoUrl,serialNumber, heading, listItem) {
            var videoContainer = document.getElementById('video_container');
            
            // Remove "active" class from all list items
            var listItems = document.querySelectorAll('#video_list a');

            var items = document.querySelector("#demo")
    
            listItems.forEach(function(item) {
                item.classList.remove('active');
            });
            listItem.classList.add('active');
            videoContainer.src = videoUrl;
            document.getElementById("demo").innerHTML =serialNumber +".  "+ heading;
        }  
    </script>
    
</body>
</html>

